<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>HookedIn</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body { background: linear-gradient(135deg, #fdfbfb 0%, #ebedee 100%); font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; }
    h1, h2 { color: #333; }
    .card { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.15); }
    .upload-area { border: 2px dashed #4a5568; background-color: #edf2f7; transition: background-color 0.3s ease; }
    .upload-area:hover { background-color: #e2e8f0; }
    .navbar { background-color: #ffffff; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .nav-link { padding: 15px 20px; cursor: pointer; transition: background-color 0.3s; }
    .nav-link:hover, .nav-link.active { background-color: #e2e8f0; border-radius: 10px; }
    .tab-content { display: none; }
    .tab-content.active { display: block; }
    .hidden { display: none; }
  </style>
</head>
<body class="min-h-screen">
  
  <!-- Welcome Screen -->
  <div id="welcome-screen" class="min-h-screen flex items-center justify-center bg-white relative">
    <img src="HookedIn.png" alt="Welcome Design" class="absolute inset-0 w-full h-full object-cover z-0">
    
    <div class="p-8 bg-white bg-opacity-90 rounded-2xl shadow-xl w-full max-w-md text-center z-10">
      <button onclick="showLoginScreen()" 
        class="w-full bg-[#BF5700] text-white text-lg font-semibold p-4 rounded-full shadow-lg hover:bg-[#a64a00] transition mb-4">
        Login
      </button>
      
      <button onclick="showSignUpScreen()" 
        class="w-full bg-[#BF5700] text-white text-lg font-semibold p-4 rounded-full shadow-lg hover:bg-[#a64a00] transition">
        Sign Up
      </button>
    </div>
    
    
  </div>
  

  <!-- Sign Up Screen -->
  <div id="signup-screen" class="hidden min-h-screen flex items-center justify-center bg-white">
    <div class="p-8 bg-gray-100 rounded-xl shadow-lg w-full max-w-md">
      <h1 class="text-4xl font-bold text-center mb-6">Sign Up</h1>
      <input type="text" id="signup-username" placeholder="Username" class="block w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400">
      <input type="password" id="signup-password" placeholder="Password" class="block w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-400">
      <button onclick="signup()" class="w-full bg-green-500 text-white p-3 rounded-lg shadow hover:bg-green-600 transition">Create Account</button>
      <p class="text-center mt-4 text-sm text-gray-600">Already have an account? <span class="text-blue-500 cursor-pointer" onclick="showLoginScreen()">Login</span></p>
    </div>
  </div>

  <!-- Login Screen -->
  <div id="login-screen" class="hidden min-h-screen flex items-center justify-center bg-white">
    <div class="p-8 bg-gray-100 rounded-xl shadow-lg w-full max-w-md">
      <h1 class="text-4xl font-bold text-center mb-6">Login</h1>
      <input type="text" id="username" placeholder="Username" class="block w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400">
      <input type="password" id="password" placeholder="Password" class="block w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400">
      <button onclick="login()" class="w-full bg-blue-500 text-white p-3 rounded-lg shadow hover:bg-blue-600 transition">Login</button>
      <p class="text-center mt-4 text-sm text-gray-600">Don't have an account? <span class="text-green-500 cursor-pointer" onclick="showSignUpScreen()">Sign Up</span></p>
    </div>
  </div>

  <!-- Main App -->
  <div id="main-app" class="hidden">
    <nav class="navbar p-4 flex justify-center space-x-4">
      <div class="nav-link active" onclick="switchTab('upload-tab')">Upload Resume</div>
      <div class="nav-link" onclick="switchTab('interested-tab')">Interested Clubs</div>
      <div class="nav-link" onclick="switchTab('profile-tab')">Profile</div>

    </nav>

    <h1 class="text-5xl font-extrabold text-center my-8">Longhorn Link</h1>

    <div id="upload-tab" class="tab-content active p-8">
      <div class="max-w-4xl mx-auto mb-8 upload-area p-6 rounded-lg shadow-inner text-center">
        <label for="resume-upload" class="block text-2xl font-medium text-gray-700 mb-4">Upload Your Resume</label>
        <input type="file" id="resume-upload" accept=".pdf,.doc,.docx,.txt" class="block mx-auto text-gray-700 p-2 border border-gray-400 rounded-lg shadow-sm cursor-pointer" />
      </div>

      <div id="club-list" class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-2 gap-6"></div>
    </div>

    <div id="interested-tab" class="tab-content p-8">
      <div class="max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-2xl">
        <h2 class="text-3xl font-semibold mb-4">Your Interested Clubs</h2>
        <ul id="interested-clubs" class="list-disc pl-5 space-y-2 text-xl text-gray-700"></ul>
        <p id="no-clubs" class="text-gray-600">You haven't selected any clubs yet.</p>
      </div>
    </div>

    <!-- Profile Tab -->
    <div id="profile-tab" class="tab-content p-8">
      <div class="max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-2xl">
        <h2 class="text-3xl font-semibold mb-4">Your Profile</h2>
        
        <!-- Add Interest Input Field and Button -->
        <label for="interests-input" class="block text-lg font-medium text-gray-700 mb-2">Add Your Interests</label>
        <input type="text" id="interests-input" class="block w-full p-3 mb-4 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400" placeholder="e.g., Software Engineering, Web Development" />
        <button onclick="addInterest()" class="w-full bg-blue-500 text-white p-3 rounded-lg shadow hover:bg-blue-600 transition">Add Interest</button>

        <!-- Interests List -->
        <div id="interests-list" class="mt-6">
          <h3 class="text-2xl font-semibold mb-4">Your Interests</h3>
          <ul id="interests-display" class="list-disc pl-5 space-y-2 text-xl text-gray-700"></ul>
        </div>
      </div>
    </div>

  </div>


  <script src="clubData.js"></script>
  <script>
    const clubList = document.getElementById('club-list');
    const interestedClubs = document.getElementById('interested-clubs');
    const noClubsMessage = document.getElementById('no-clubs');
    const resumeUpload = document.getElementById('resume-upload');
    const interestsInput = document.getElementById('interests-input');
    const interestsDisplay = document.getElementById('interests-display');

    let users = {};
    let selectedClubs = [];

    function showLoginScreen() {
      document.getElementById('welcome-screen').classList.add('hidden');
      document.getElementById('signup-screen').classList.add('hidden');
      document.getElementById('login-screen').classList.remove('hidden');
    }

    function showSignUpScreen() {
      document.getElementById('welcome-screen').classList.add('hidden');
      document.getElementById('login-screen').classList.add('hidden');
      document.getElementById('signup-screen').classList.remove('hidden');
    }

    function signup() {
      const username = document.getElementById('signup-username').value;
      const password = document.getElementById('signup-password').value;

      if (username && password) {
        users[username] = password;
        alert('Account created successfully! Please log in.');
        showLoginScreen();
      } else {
        alert('Please enter both username and password to sign up.');
      }
    }

    function login() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      if (users[username] && users[username] === password) {
        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('main-app').classList.remove('hidden');
      } else {
        alert('Incorrect username or password. Please try again.');
      }
    }

    function logout() {
      document.getElementById('main-app').classList.add('hidden');
      document.getElementById('welcome-screen').classList.remove('hidden');
      document.getElementById('username').value = '';
      document.getElementById('password').value = '';
    }

    function switchTab(tabId) {
      document.querySelectorAll('.nav-link').forEach(tab => tab.classList.remove('active'));
      document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));

      document.querySelector(`[onclick="switchTab('${tabId}')"]`).classList.add('active');
      document.getElementById(tabId).classList.add('active');
    }

    
    let userInterests = [];  // Store user's interests

    // Modify the addInterest function to store the user's interest
    function addInterest() {
      const interest = interestsInput.value.trim();
      if (interest && !userInterests.includes(interest)) {
        userInterests.push(interest);  // Add the new interest to the list
        interestsInput.value = '';  // Clear the input
        updateInterestsDisplay();  // Update the display of interests
        suggestClubs();  // Call the function to suggest clubs based on new interest
      }
    }

    // Update the display of interests
    function updateInterestsDisplay() {
      interestsDisplay.innerHTML = '';
      if (userInterests.length === 0) {
        interestsDisplay.innerHTML = '<li class="text-gray-600">No interests added yet.</li>';
      } else {
        userInterests.forEach(interest => {
          const li = document.createElement('li');
          li.textContent = interest;
          interestsDisplay.appendChild(li);
        });
      }
    }


    function displaySuggestedClubs(suggestedClubs) {
    clubList.innerHTML = '';
    suggestedClubs.forEach(club => {
      if (!selectedClubs.includes(club)) {
        const card = document.createElement('div');
        card.className = 'p-4 shadow-lg rounded-2xl bg-white card';

        const clubName = document.createElement('h2');
        clubName.className = 'text-2xl font-semibold mb-4';
        clubName.textContent = club;
        card.appendChild(clubName);

        const buttonContainer = document.createElement('div');
        buttonContainer.className = 'flex justify-between';

        // Interested button
        const interestedButton = document.createElement('button');
        interestedButton.className = 'flex items-center px-4 py-2 rounded-xl shadow-md bg-green-500 text-white';
        interestedButton.innerHTML = '<i data-lucide="check" class="mr-2"></i> Interested';
        interestedButton.onclick = () => {
          if (!selectedClubs.includes(club)) {
            selectedClubs.push(club);
            updateInterestedClubs();
            displaySuggestedClubs(suggestedClubs.filter(c => c !== club));
          }
        };

        // Not Interested button
        const notInterestedButton = document.createElement('button');
        notInterestedButton.className = 'flex items-center px-4 py-2 rounded-xl shadow-md bg-red-500 text-white';
        notInterestedButton.innerHTML = '<i data-lucide="x" class="mr-2"></i> Not Interested';
        notInterestedButton.onclick = () => {
          displaySuggestedClubs(suggestedClubs.filter(c => c !== club));
        };

        buttonContainer.appendChild(interestedButton);
        buttonContainer.appendChild(notInterestedButton);
        card.appendChild(buttonContainer);

        clubList.appendChild(card);
      }
    });
    lucide.createIcons();
  }

  function updateInterestedClubs() {
    interestedClubs.innerHTML = '';
    if (selectedClubs.length === 0) {
      noClubsMessage.style.display = 'block';
    } else {
      noClubsMessage.style.display = 'none';
      selectedClubs.forEach(club => {
        const li = document.createElement('li');
        li.textContent = club;
        interestedClubs.appendChild(li);
      });
    }
  }


    resumeUpload.addEventListener('change', (event) => {
      const file = event.target.files[0];
      if (file && file.type.includes('text')) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const textContent = e.target.result.toLowerCase();
          const suggestedClubs = Object.keys(clubData).filter(club => {
            return clubData[club].some(keyword => textContent.includes(keyword));
          });

          if (suggestedClubs.length > 0) {
            displaySuggestedClubs(suggestedClubs);
          } else {
            clubList.innerHTML = '<p class="text-center text-gray-600">No clubs matched your resume. Try selecting manually!</p>';
          }
        };
        reader.readAsText(file);
      } else {
        alert('Please upload a text-based resume (.txt format). PDF/Word support coming soon!');
      }
    });

    lucide.createIcons();
  </script>
</body>
</html>
